---
title: "【Go1.21】新しいビルトイン関数 max / min が追加されました "
linkTitle: "【Go1.21】新しいビルトイン関数 max / min が追加されました "
date: 2023-08-02T00:00:00+09:00
description: >
  【Go1.21】新しくビルトイン関数として追加された max / min について紹介します。
tags:
  - golang
---

## max / min 関数
`max` / `min` 関数は、引数として与えられた任意個の順序付け可能な型の値から最大 / 最小のものを返します。

例：
```go
fmt.Println(max(19, 2))
// 19
fmt.Println(min(3.01, 7.6, 3))
// 3
fmt.Println(min("RED", "BLUE", "GREEN"))
// BLUE
fmt.Println(max(0))
// 0
```

## 注意点
### スライスに対する適用
以下のようにスライスを引数にとるような使い方はできません。
```go
numbers := []int{1, 2, 3, 4, 5}
fmt.Println(max(numbers...))
// コンパイルエラー
```

### 浮動小数点に対する適用
引数のいずれかが `NaN` （Not a Number）である場合、返り値は必ず `NaN` になります。
```go
fmt.Println(max(2.44, math.NaN(), -9.0))
// NaN
fmt.Println(min(2.44, math.NaN(), -9.0))
// NaN
```


## ビルトイン関数になるまでの経緯
Go1.21でビルトイン関数となった `max` / `min` 関数ですが、ここまでには長い議論がありました。具体的には、**ビルトイン関数にすべき**か、それとも**ジェネリクスを用いて記述してライブラリとして提供すべき**か、という議論です。 言い換えると、「`max` / `min` は加算のような基本的な操作なのだからビルトインでよい」という主張と、「せっかくジェネリクスで書けるのだからライブラリを書くべき」という主張が対立していました。   
最終的にこの議論は、`min` / `max` 関数はビルトイン関数として提供し、これとは別に `Orderd` 型 と `Orderd` 型を型パラメータとして持つ関数 `Less` ,`Compare` をライブラリとして提供するという結論で落ち着いています。

（githubのissue上で議論されていたこれらの内容は[こちら](https://github.com/golang/go/issues/59488)から見ることができます）

